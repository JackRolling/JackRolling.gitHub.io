### 本地安装

* 下载本项目：npm install

* 启动项目：npm run dev

* 构建项目dist：npm run build

### 启动后端项目

- 详细请加作者微信或微信群

### 登录
- 用户名/密码 admin/123456
  ![01](/detail/001.png)

### 流程属性设置
- 流程属性设置，如图点击。发起流程的时候是以流程KEY作为标识来发起某个流程的（一般为实体类名）
  ![003](/chart/003.png)

### 画图功能区域
- 拖拽节点到绘图区，进行任意连线。画图功能区域划分如图，节点分为五种：开始节点、串行节点、并行节点、结束节点、虚拟节点，还有一个节点任务
  ![03](/chart/03.png)
### 节点与任务的概念
- 节点与任务的关系：节点只是用于流转的，不需要人员办理的，所以衍生出了一个节点任务作为每个节点下需要人员办理的任务。每种节点默认都自带一个节点任务即需要一个人来办理一个任务
- 其中只有串行节点、并行节点才可以设置多个节点任务（其他节点都只有一个默认的任务），表示需要多个人来办理，如下图串行节点带了两个节点任务，括号里任务数为2，即该节点需要两个人来审批
  ![03](/chart/03.png)
- 串行节点表示流程只能有一个串行分支往下走，当一个节点下有多个串行分支时，一定都带上连线属性的条件且只有一个满足条件（不带条件则默认就满足条件）。如图请假一天和两天走不同节点
  ![06](/chart/06.png)
- 并行节点表示流程可以同时流转到多个并行分支，并且并行分支可以部分节点或全部节点加连线属性的条件，满足条件的并行节点才会被开启（不带条件则默认就满足条件）。如图请假两天的串行节点，一定会走标注1和2的并行节点，标注3和4的并行节点根据条件走
- 到这里应该大家能看出什么时候用并行节点了吧，就是只要想往下同时流转到几个节点的时候都是并行节点，当然也有可能因为条件只有一个并行节点满足，但也是合理的
  ![07](/chart/07.png)
- 虚拟节点是一种不会被自动流转的节点即不能连线，只能是被驳回到的节点，比如【修改工单信息】，当这个节点审批后就会直接回到原驳回人那里，不会再次经历途中节点。当然你也可以选择不用
- 节点任务只能被串行节 或 并行节连线

### 高级特性-串行节点、并行节点
- 【高级-一般可不用】1、下一节点可同时存在不等待或等待兄弟任务（串行/并行），但必须都存在条件。因不等待或等待节点在执行的时候，只能流转到多个不等待节点或多个等待节点，不等待和等待不能同时流转
- 【高级-条件需设置正确】2、下一节点同时存在并行或串行节点（串行/并行），但必须都存在条件。因并行节点和串行节点在执行的时候，只能流转到一个串行节点或多个并行节点，串行和并行不能同时流转

### 属性配置-开始节点
- 双击开始节点进行节点属性、监听器属性、以及节点任务属性设置，注意这里的节点任务属性是之前讲到的，开始节点只有一个默认的任务
- 节点属性中主要是PC待办页面和PC已办页面，不配置则都默认增加审批过程、查看流程图的页面。
- 监听器属性中的监听类为BusinessInterceptor接口的实现类，方法名称为该接口的方法名称，如此处的收入工单监听类IncomeEndInterceptor结束时执行的compete方法
  ![04](/chart/04.png)
- 节点任务属性中任务类型分为个人、角色、或签。个人即表示由某个人来办理这个任务，角色则表示拥有同一个角色的人都可以办理，谁先办理属于谁，或签则该节点下所有任务类型都必须是或签，一人办理完则其他兄弟任务都结束。会签在本系统中采用多个节点任务来表达一个节点同时需多个人来办理的情况
- 办理人员类型分为正常分配、动态分配、动态计算，常使用的主要是正常分配、动态分配。正常分配指可指定一个人或一个角色来办理，动态分配则表示根据某个SPEL表达式（如下方动态办理人KEY为create_user）来动态指定某个人，动态计算则表示根据多个角色或多个人，业务侧手动调用节点任务增量接口，来动态计算和生成多个节点任务。
- 如下截图常见的三种分配办理人的方式：1、直接指定某个人 2、指定某个角色 3、动态办理人KEY 由程序根据某个SPEL表达式（如下方的create_user）来【动态】指定某个人，所以办理人员类型为动态分配，因为是可以动态改变的
  ![08](/chart/08.png)
  ![09](/chart/09.png)
  ![10](/chart/10.png)
- 【高级-一般可不用】动态计算表示这个节点可能需要多个人做内控确认的任务，故需要动态计算出当前节点下多个人的任务出来，而每个人的角色必须不同，因为相同角色一般只安排一人办理。（高级只有业务很复杂才用的到）
- 【高级-一般可不用】现在回过头来讲监听器属性中另外的三个参数：办理人员角色、动态办理人KEY、办理人员类型，表示如果监听器属性中配置了这三个参数，则当与节点任务的中上述三个参数相同时，才执行监听器的方法。表示这个监听器只有特定的审批人审批时才执行（一般用于动态计算的任务）
  ![11](/chart/11.png)
- 【高级-一般可不用】最后讲下默认分配【注意分配2字】任务KEY、分配【注意分配2字】人员类型则与上述动态办理人KEY、办理人员类型含义是一样的，唯一不同的是表示当前任务分配【注意分配2字】下一节点的分配任务KEY、分配人员类型。被分配后立即运行，指的是当前节点分配的下一节点是否在当前任务不审批情况下就立即运行，即上下级节点任务同时运行（一般用于动态计算的任务）
- 多人会签审批都执行监听，如果选择否，则只有当节点先所有任务都审批完后才会执行一次监听器。被驳回是否可跳过，如果选择是，则指被驳回后不会开启这个任务
### 属性配置-串行节点、并行节点
- 【高级-一般可不用】这两种节点就节点属性中多了四个参数：是否等待兄弟任务表示当一个节点下多个任务，每个任务审批后是否要等待其他兄弟任务都审批后才能开启后续节点。不等待则每个任务审批后都会再次开启下一节点
- 【高级-一般可不用】是否自动流转下一节点，如果设置为否，则表示业务侧会手动调用节点任务增量接口，来动态计算和生成多个节点任务，同时增量的任务课设置【被分配后是否立即运行】，立即运行则会与当前任务同时运行
- 【高级】驳回类型表示被驳回后再次审批的节点，需要再次一个一个的依次返回到原驳回的节点，还是直接返回到原驳回的节点。
- 【高级】是否继续下一节点表示如果下一节点条件都不满足，是否自动继续找下下一节点，以此类推
### 配置注意事项
- 如果配置了动态办理人KEY如create_user，则办理人员类型不能为正常分配。当然系统后台有校验

  ![11](/chart/12.png)
### 属性配置-结束节点
- 多了一个是否自动结束的属性配置，顾名思义就是当前节点是否需要人员来审批，不需要则会自动审批并结束
  ![11](/chart/13.png)
### 属性配置-虚拟节点
- 多了一个驳回类型为直接返回的配置属性，并且不可编辑。表示被驳回到该节点后再次审批会直接回到原驳回节点
  ![11](/chart/14.png)
### 属性配置-连线属性
- 条件变量名(新增)，比如这里isCharge表示是否要收费，如果程序设置这个条件变量值(新增)为1，则表示需要收费，就会流转到该节点或任务
  ![11](/chart/15.png)
### 最简单配置
- 你其实可以只画节点，配置流程名称和流程KEY，就直接发起流程，此时所有节点办理人都是自己（注：此处的自己是指发布流程图的这个人非工单发起人）

- 预览流程图、发布流程
  ![02](/detail/02.png)
- 更多功能...

